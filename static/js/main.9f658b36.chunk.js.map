{"version":3,"sources":["components/map.png","components/marker.png","components/layout.js","index.js"],"names":["module","exports","throttle","fn","interval","timer","_self","firstTime","args","arguments","_me","this","apply","setTimeout","clearTimeout","Layout","props","handleImgClick","e","markers","state","slice","push","key","length","toString","coordinate","nativeEvent","offsetY","markerSize","height","offsetX","width","setState","isDragging","handleDragStart","preventDefault","target","getAttribute","clientpos","x","clientX","y","clientY","handleDrag","targetKey","idx","findIndex","item","range","maxY","maxX","_throttledMouseMove","onMouseMove","persist","handleDragEnd","handleImgLoad","img","offsetHeight","minY","offsetWidth","minX","pins","map","marker","className","style","top","left","cursor","onMouseDown","onMouseUp","alt","value","src","icon","onClick","onLoad","href","React","Component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.9f658b36.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/map.82481805.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAbdJREFUeNq0V91tgzAQhiwAUgeA1z6FTlA6QegG7nul0glKJmgqdQCyAd2ATlDy1NdkgEplAvqd5AeE8J2N6UknJ/GdP9+/Ew7DELjQ1eN3jiXXXzNwpz83P+/Xne05oQ0wwGIsB3ABjhjRC7gmWVzi1wsYoEqDRg6OoQsUnAdYYIAS4FOwnB4AXjsBA7TE8hr4082c5bPAAKWk+QrWIXJ7No35xiB8CNajBFyKFltae6TyAZMVKZgS8JaR72FxLAFLCTWbMNCrsLwwevfQazhXZ4zy3pSl+J2APxjdXIox5zIp9jWzl9kk1xydpG40dqVELsCpRWtNfYB7g2ykBwRHitkT67jlYqwHhsnaktHtJGAuTlu62NSl2hOtMEgaqY7JorPFNDqNGkgiyH4i8fhy0plbWeTHVpdeYiFbuUynTh/uS0cYo1zKSa0A2psSbsM0A7J47wmsTE3H5umz1OVvAC19OtcSl1+kBLV9Zbo+g+5gbesNrMFbYXKNR6dYji7AqW57kTDBslWnEw48C/HuXfIhXPAXhnrubmbrGZc7/CdwrF2ecL14zYfAuJeriYsL13P+BBgALTvEvEuCOh4AAAAASUVORK5CYII=\"","import React from 'react';\r\nimport './layout.css';\r\nimport map from './map.png';\r\nimport icon from './marker.png';\r\n\r\nconst throttle = function(fn, interval){\r\n  let _self = fn,\r\n      timer,\r\n      firstTime = true;\r\n\r\n  return function(){\r\n    let args = arguments,\r\n        _me = this;\r\n\r\n    if (firstTime) {\r\n      _self.apply(_me, args);\r\n      return firstTime = false;\r\n    }\r\n\r\n    if (timer) {\r\n      return false;\r\n    }\r\n\r\n    timer = setTimeout(() => {\r\n      clearTimeout(timer);\r\n      timer = null;\r\n      _self.apply(_me, args);\r\n\r\n    }, interval || 500);\r\n\r\n  }\r\n};\r\n\r\n\r\nexport default class Layout extends React.Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n      markers:[],\r\n      clientpos: {\r\n        x: 0,\r\n        y: 0\r\n      },\r\n      isDragging: false\r\n    }\r\n  }\r\n\r\n  handleImgClick = (e) => {\r\n    const markers = this.state.markers.slice();\r\n    markers.push(\r\n      {\r\n        key : markers.length.toString(),\r\n        coordinate : [e.nativeEvent.offsetY - this.props.markerSize.height/2, e.nativeEvent.offsetX - this.props.markerSize.width/2]\r\n      }\r\n    );\r\n    this.setState({\r\n      markers: markers,\r\n      isDragging: false,\r\n    });\r\n  }\r\n\r\n  handleDragStart = (e)=> {\r\n    e.preventDefault();\r\n    this.setState({\r\n      isDragging: true,\r\n      target: e.target.getAttribute('value'),\r\n      clientpos: {\r\n        x: e.clientX,\r\n        y: e.clientY\r\n      }\r\n    });\r\n  }\r\n\r\n  handleDrag = (e) =>{\r\n    if (this.state.isDragging) {\r\n      const markers = this.state.markers.slice();\r\n      const clientpos = this.state.clientpos;\r\n      const targetKey = this.state.target;\r\n      const idx = markers.findIndex((item)=>{\r\n        return item.key=== targetKey;\r\n      });\r\n      const coordinate = markers[idx].coordinate.slice();\r\n      coordinate[0] += e.clientY - clientpos.y;\r\n      coordinate[1] += e.clientX - clientpos.x;\r\n      if (coordinate[0] <= this.state.range.maxY && coordinate[0] >= 0\r\n        && coordinate[1] <= this.state.range.maxX && coordinate[1] >= 0) {\r\n        markers[idx].coordinate = coordinate;\r\n        this.setState({\r\n          markers: markers,\r\n          clientpos: {\r\n            y: e.clientY,\r\n            x: e.clientX\r\n          }\r\n        });\r\n      } else {\r\n        this.setState({\r\n          clientpos: {\r\n            y: e.clientY,\r\n            x: e.clientX,\r\n          },\r\n          isDragging: false,\r\n        });\r\n      }\r\n    };\r\n  }\r\n\r\n  _throttledMouseMove = throttle(this.handleDrag, 10);\r\n  \r\n  onMouseMove = (e) => {\r\n    e.persist();\r\n    this._throttledMouseMove(e);\r\n  }\r\n\r\n  handleDragEnd = (e) => {\r\n    this.setState({\r\n      isDragging: false,\r\n    });\r\n  }\r\n\r\n  handleImgLoad = ({target:img}) =>{\r\n    this.setState({\r\n      range:{\r\n        maxY: img.offsetHeight - this.props.markerSize.height,\r\n        minY: 0,\r\n        maxX: img.offsetWidth - this.props.markerSize.width,\r\n        minX: 0\r\n      }\r\n    });\r\n  }\r\n\r\n  render(){\r\n    const markers = this.state.markers;\r\n    const pins =  markers.map((marker, idx)=>{\r\n      return (\r\n       <div key={marker.key} className=\"map-marker\"\r\n          style={{\r\n            top: marker.coordinate[0] ,\r\n            left: marker.coordinate[1] ,\r\n            cursor: (this.state.isDragging)?'move': 'pointer',\r\n          }}\r\n          onMouseDown={(e)=>{this.handleDragStart(e);}}\r\n          onMouseUp={(e)=>{this.handleDragEnd(e);}}\r\n        >\r\n          <img alt='pin' value={marker.key} src={icon}/>\r\n       </div>\r\n      );\r\n    })\r\n    //          {/* onMouseMove={(e)=>{this.handleDrag(e);}}  */}\r\n    return (\r\n      <>\r\n        <h3 className='title'>React Draggable Component</h3>\r\n        <div className='layout'\r\n          onMouseMove={this.onMouseMove} \r\n        >\r\n          <img src={map} alt='map' onClick={(e)=>{this.handleImgClick(e);}} onLoad={(e)=>{this.handleImgLoad(e)}}/>\r\n          <div>\r\n            {pins}\r\n          </div>\r\n        </div>\r\n        <b>Description:</b>\r\n        <div>1. Click add marker</div>\r\n        <div>2. Drag marker</div>\r\n        <a className=\"home\" href='/'>HOME</a>\r\n      </>\r\n    );\r\n  };\r\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Layout from './components/layout';\nimport './index.css';\n\nReactDOM.render(<Layout markerSize={{width:30, height:30}} />, document.getElementById('root'));"],"sourceRoot":""}