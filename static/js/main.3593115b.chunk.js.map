{"version":3,"sources":["components/map.png","components/marker.png","components/layout.js","index.js"],"names":["module","exports","throttle","fn","interval","timer","_self","firstTime","args","arguments","_me","this","apply","setTimeout","clearTimeout","Layout","props","handleImgClick","nativeEvent","offsetY","offsetX","markers","state","slice","markerSize","height","width","push","key","length","toString","coordinate","setState","isDragging","handleDragStart","e","preventDefault","target","getAttribute","clientpos","x","clientX","y","clientY","handleDrag","range","maxY","maxX","idx","findIndex","item","_throttledMouseMove","onMouseMove","persist","handleDragEnd","handleImgLoad","offsetHeight","offsetWidth","minY","minX","pins","map","marker","className","style","top","left","cursor","onMouseDown","onMouseUp","alt","value","src","icon","onClick","onLoad","href","React","Component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.3593115b.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/map.82481805.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAbdJREFUeNq0V91tgzAQhiwAUgeA1z6FTlA6QegG7nul0glKJmgqdQCyAd2ATlDy1NdkgEplAvqd5AeE8J2N6UknJ/GdP9+/Ew7DELjQ1eN3jiXXXzNwpz83P+/Xne05oQ0wwGIsB3ABjhjRC7gmWVzi1wsYoEqDRg6OoQsUnAdYYIAS4FOwnB4AXjsBA7TE8hr4082c5bPAAKWk+QrWIXJ7No35xiB8CNajBFyKFltae6TyAZMVKZgS8JaR72FxLAFLCTWbMNCrsLwwevfQazhXZ4zy3pSl+J2APxjdXIox5zIp9jWzl9kk1xydpG40dqVELsCpRWtNfYB7g2ykBwRHitkT67jlYqwHhsnaktHtJGAuTlu62NSl2hOtMEgaqY7JorPFNDqNGkgiyH4i8fhy0plbWeTHVpdeYiFbuUynTh/uS0cYo1zKSa0A2psSbsM0A7J47wmsTE3H5umz1OVvAC19OtcSl1+kBLV9Zbo+g+5gbesNrMFbYXKNR6dYji7AqW57kTDBslWnEw48C/HuXfIhXPAXhnrubmbrGZc7/CdwrF2ecL14zYfAuJeriYsL13P+BBgALTvEvEuCOh4AAAAASUVORK5CYII=\"","import React from 'react';\r\nimport './layout.css';\r\nimport map from './map.png';\r\nimport icon from './marker.png';\r\n\r\nconst throttle = function(fn, interval){\r\n  let _self = fn,\r\n      timer,\r\n      firstTime = true;\r\n\r\n  return function(){\r\n    let args = arguments,\r\n        _me = this;\r\n\r\n    if (firstTime) {\r\n      _self.apply(_me, args);\r\n      return firstTime = false;\r\n    }\r\n\r\n    if (timer) {\r\n      return false;\r\n    }\r\n\r\n    timer = setTimeout(() => {\r\n      clearTimeout(timer);\r\n      timer = null;\r\n      _self.apply(_me, args);\r\n\r\n    }, interval || 500);\r\n\r\n  }\r\n};\r\n\r\nexport default class Layout extends React.Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n      markers:[],\r\n      clientpos: {\r\n        x: 0,\r\n        y: 0\r\n      },\r\n      isDragging: false\r\n    }\r\n    this.markerSize = {\r\n      height:30,\r\n      width:30\r\n    }\r\n  }\r\n\r\n  handleImgClick = ({nativeEvent:{offsetY, offsetX}}) => {\r\n    const markers = this.state.markers.slice();\r\n    const {height, width} = this.markerSize;\r\n    markers.push(\r\n      {\r\n        key : markers.length.toString(),\r\n        coordinate : [offsetY -height/2, offsetX -width/2]\r\n      }\r\n    );\r\n    this.setState({\r\n      markers: markers,\r\n      isDragging: false,\r\n    });\r\n  }\r\n\r\n  handleDragStart = (e)=> {\r\n    e.preventDefault();\r\n    this.setState({\r\n      isDragging: true,\r\n      target: e.target.getAttribute('value'),\r\n      clientpos: {\r\n        x: e.clientX,\r\n        y: e.clientY\r\n      }\r\n    });\r\n  }\r\n\r\n  handleDrag = ({clientX, clientY}) =>{\r\n    const {\r\n      markers,\r\n      clientpos:{x, y}, \r\n      target,\r\n      maxY,\r\n      maxX\r\n    } = {\r\n      markers: this.state.markers.slice(),\r\n      ...this.state,\r\n      ...this.range\r\n    }\r\n\r\n    const idx = markers.findIndex((item)=>{\r\n      return item.key=== target;\r\n    });\r\n    const coordinate = markers[idx].coordinate.slice();\r\n    \r\n    coordinate[0] += clientY - y;\r\n    coordinate[1] += clientX - x;\r\n    \r\n    if (coordinate[0] <= maxY && coordinate[0] >= 0\r\n      && coordinate[1] <= maxX && coordinate[1] >= 0) {\r\n      markers[idx].coordinate = coordinate;\r\n      this.setState({\r\n        markers: markers,\r\n        clientpos: {\r\n          y: clientY,\r\n          x: clientX\r\n        }\r\n      });\r\n    } else {\r\n      this.setState({\r\n        clientpos: {\r\n          y: clientY,\r\n          x: clientX,\r\n        },\r\n        isDragging: false,\r\n      });\r\n    }\r\n  }\r\n\r\n  _throttledMouseMove = throttle(this.handleDrag, 10);\r\n  \r\n  onMouseMove = (e) => {\r\n    e.persist();\r\n    this._throttledMouseMove(e);\r\n  }\r\n  handleDragEnd = () => {\r\n    this.setState({\r\n      isDragging: false,\r\n    });\r\n  }\r\n  handleImgLoad = ({target:{offsetHeight, offsetWidth}}) =>{\r\n    const {height, width} = this.markerSize\r\n    this.range = {\r\n      maxY: offsetHeight - height,\r\n      minY: 0,\r\n      maxX: offsetWidth - width,\r\n      minX: 0\r\n    }\r\n  }\r\n  \r\n  render(){\r\n    const {markers, isDragging} = this.state;\r\n    const pins =  markers.map((marker, idx)=>{\r\n      const {key, coordinate} = marker;\r\n      return (\r\n       <div key={key} className=\"map-marker\"\r\n          style={{\r\n            top: coordinate[0] ,\r\n            left: coordinate[1] ,\r\n            cursor: (isDragging)?'move': 'pointer',\r\n          }}\r\n          onMouseDown={(e)=>{this.handleDragStart(e);}}\r\n          onMouseUp={(isDragging)? this.handleDragEnd: null}\r\n        >\r\n          <img alt='pin' value={key} src={icon}/>\r\n       </div>\r\n      );\r\n    })\r\n\r\n    return (\r\n      <>\r\n        <h3 className='title'>React Draggable Component</h3>\r\n        <div className='layout'\r\n          onMouseMove={(isDragging)? this.onMouseMove: null} \r\n        >\r\n          <img src={map} alt='map' onClick={(e)=>{this.handleImgClick(e);}} onLoad={(e)=>{this.handleImgLoad(e)}}/>\r\n          <div>\r\n            {pins}\r\n          </div>\r\n        </div>\r\n        <b>Description:</b>\r\n        <div>1. Click add marker</div>\r\n        <div>2. Drag marker</div>\r\n        <a className=\"home\" href='/'>HOME</a>\r\n      </>\r\n    );\r\n  };\r\n}","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport Layout from './components/layout';\r\nimport './index.css';\r\n\r\nReactDOM.render(<Layout />, document.getElementById('root'));"],"sourceRoot":""}